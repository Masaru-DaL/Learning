# 2022.04.26.ComputerSystem
# Week3 コンピュータ構成要素
## 到達目標
- コンピュータの5大装置を知り、当人なりに説明できる。
- プログラム動作の仕組みを知り、当人なりに説明できる。
  - (計算問題の準備)コンピュータの補助単位を知る。
- フローチャートと疑似言語の、『分岐構造』を、読み書きできる。

# プログラム動作の仕組み
- コンピュータ
  - 入力する
  - 計算する
  - 出力する
    - などの基本動作を指示する「命令」によって動く。

## 主記憶上のプログラムは、命令サイクルと実行サイクルを繰り返すことで、処理を進めていく
- 命令サイクル(Iサイクル)
  - 命令フェッチ
    - 主記憶装置から命令を取り出し、解読する工程
- 実行サイクル(Eサイクル)
  - 命令を解読し、解読された命令やアドレスに基づいて、実行、処理結果の書き込みを行う工程

1. CPUは、命令アドレスレジスタに格納されているアドレスを主記憶装置へ送るとともに、読み出し信号を読み書き制御部に伝える。
2. 主記憶装置は、指定されたアドレスから命令を読み出し、CPU内の命令レジスタに格納する。CPUは命令を受け取り、命令レジスタに格納する。
3. 1つの命令の取り出しが終了すると、プログラムレジスタの値を次に実行すべき命令アドレスに変更する。
   1. 通常の命令の場合は、プログラムレジスタに命令長(1語長または2語長)をアドレス加算する
4. 命令レジスタに格納された命令のうち「オペレータ部(命令)」を命令解読器(デコーダ)で解読。
5. オペランドアドレス計算
   1. オペランドアドレス計算命令解読の結果に基づいて、「オペランド部(アドレス情報)」をアドレス変換機構へ送り、有効アドレスを計算。
6. オペランドの取り出し
   1. 有効アドレスにより、主記憶装置のデータを取り出す。
7. 命令を実行する。
   1. 通常の命令は、オペランド部で指定されたデータを使用して計算を行う。
   2. 分岐命令の場合は、分岐先の有効アドレスを命令アドレスレジスタに格納。
   3. SVC(Super Visor Call)命令では、有効アドレスを引数として、割り出し(OSの機能を呼び出す内部割込み)を行う。
8. 実行された演算結果をレジスタ、または主記憶装置へ格納する(格納の際は有効アドレスを計算する)


- 制御用レジスタ
  - 次に実行する命令のアドレスを記憶する
    - 別名: プログラムカウンタ、プログラムレジスタ、命令カウンタ、逐次制御カウンタ

- 処理装置を構成する要素
  - 分岐命令の実行によって更新されるもの
    - --> プログラムレジスタ
  - 命令の実行は、プログラムレジスタに格納されたアドレス値により、主記憶上の命令が命令レジスタに読み込まれる。

# 基本情報技術者試験
## 出典：平成20年春期　問18 プロセッサ　(全68問中38問目)
主記憶へのアクセスを伴う演算命令を実行するとき，命令解読とオペランド読出しの間に行われる動作はどれか。
--> 実行アドレス計算

## 出典：平成23年秋期　問10 プロセッサ　(全68問中27問目)
CPUのプログラムレジスタ(プログラムカウンタ)の役割はどれか。
--> 命令を読み出すために，次の命令が格納されたアドレスを保持する。

# ITパスポート
## 出典：平成24年春期　問61 プロセッサ　(全22問中16問目)
CPUにおけるプログラムカウンタの説明はどれか。
--> 次に実行する命令が入っている主記憶のアドレスを保持する。

## 出典：平成24年秋期　問76 プロセッサ　(全22問中15問目)
コンピュータにおける命令の実行順序に関する次の記述中のa，bに入れる字句の適切な組合せはどれか。
コンピュータの命令実行順序は，
プログラムカウンタの参照
命令のa
次の命令の主記憶アドレスをプログラムカウンタにセットする。
命令のb
命令に応じた処理を実行
(1)に戻る。
を繰り返す。

--> a = 読み込み, b = 解読

# プロセッサの性能と高速化技術
## 動作速度を決めるクロック周波数
- クロック
  - コンピュータのマザーボード(CPUやメモリなどが取り付けられている基盤)状にある複数の装置が、タイミングを合わせて動作するために発生させる信号のこと
- クロック周波数
  - 上記の信号の周波数(時間あたりの発生回数)を表す
- 「基本的には」クロック周波数が高い = 高速に動作する
  - CPUはクロックに同期して動作するため
  - ※ただし、CPUにはさまざまな動作方式(アーキテクチャ)があり、クロック周波数の値だけでは正確な性能比較はできない
- 1つの命令は、複数クロックで実行される
### クロック周波数の単位
- MHz(メガヘルツ) または、GHz(ギガヘルツ)
  - 例: 200MHzなら1秒間の信号は200*10⁶回, 1GHzなら10⁹回
#### CPI(Cycles Per Instruction)
- 1命令の実行に必要なクロック数を表す単位
  - 例: 10CPIなら10クロック/命令
- 1クロック当たりの実行時間の計算
  - 1秒 / (クロック周波数 * 10⁶) ...MHzの場合
- 平均命令実行時間(1命令当たりの実行時間)の計算
  - 1クロック当たりの実行時間 * 1命令実行に必要なクロック数
###### 問
あるCPUが500MHzで8CPIの場合の平均命令実行時間(1命令当たりの実行時間)を求めよ

<!-- 平均命令実行時間 = 1クロック当たりの実行時間 * 1命令実行に必要なクロック数 -->
<!-- 1クロック当たりの実行時間 = 1秒 / (クロック周波数 * 10⁶) ...MHzの場合 -->
<!-- 1命令実行に必要なクロック数 = CPI -->
1/(500 * 10⁶)
0.002 * 10⁻⁶
2 * 10⁻⁹
2n秒(ナノ) // 1クロック当たりの実行時間が出る

2n秒 * 8CPI
16n秒

#### MIPS(Million Instructions Per Second)


# プロセッサとCPU
試験問題で使われる「プロセッサ」という用語は、処理を行う装置全般を含んでいる。
CPU(中央処理装置)はプロセッサの1種で、一般に制御装置や演算装置を持つコンピュータの中核を成す装置を指す。
- FPU
  - 浮動小数点演算を行う
- GPU
  - 表示用の画像処理を専門に行う
- DSP(デジタルシグナルプロセッサ)
  - 音声処理などを行う

# ITパスポート
## 出典：令和3年春期　問90
CPUのクロックに関する説明のうち，適切なものはどれか。
--> クロックは，命令実行のタイミングを調整する。
(CPUのクロックは、一定の周期で発生し、コンピュータの各回路が処理動作を行う基準となる信号のことで、各回路が処理のタイミングを合わせるために使用されている。)

## 出典：平成27年秋期　問63 プロセッサ　(全22問中12問目)
CPUのクロック周波数に関する記述のうち，適切なものはどれか。
--> 同一種類のCPUであれば，クロック周波数を上げるほどCPU発熱量も増加するので，放熱処置が重要となる。
(クロック周波数が高いほど発熱量も増加する。発熱量が多くなるとCPUが熱暴走を起こす可能性が高まるため、冷却装置等による放熱が重要である)

## 出典：平成23年特別　問60 プロセッサ　(全22問中17問目)
クロック周波数が1.6GHzのCPUは，4クロックで処理される命令を1秒間に何回実行できるか。
1600000000 / 4クロック
400,000,000
4億

## 出典：平成22年秋期　問57 プロセッサ　(全22問中19問目)
クロック周波数2GHzのプロセッサにおいて一つの命令が5クロックで実行できるとき，1命令の実行に必要な時間は何ナノ秒か。
1 / (2 * 10⁹)
0.5 * 10⁻⁹
0.5n秒 * 5クロック
2.5n秒
