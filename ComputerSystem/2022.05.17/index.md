# 2022.05.17.ComputerSystem
## 出典：平成23年秋期　問64 アルゴリズムとプログラミング　(全18問中10問目)
1～4の番号をもつ四つの状態がある。四つの状態は図のようにつながれており，時計回りや反時計回りに状態を選移することができる。

現在，状態1にいて，次の手順を2回実施した後はどの状態にいるか。

〔手順〕
今いる状態の番号を11倍し，それを3で割った余りによって次の処理を行う。
- 余りが0の場合：時計回りに一つ次の状態に遷移する。
- 余りが1の場合：反時計回りに一つ次の状態に選移する。
- 余りが2の場合：時計回りに二つ次の状態に選移する。

1. 状態1を11倍する
   1. 11
2. 1を3で割った余りを出す
   1. 11 % 3 => 2
3. 余りが0か1か2か判断する
  1. 余りが2 -> 時計回りに2つ次の状態に遷移する
  2. 状態1 -> 状態3になる

1. 状態3を11倍する
   1. 33
2. 1を3で割った余りを出す
   1. 33 % 3 => 0
3. 余りが0か1か2か判断する
  1. 余りが0 -> 時計回りに1つ次の状態に遷移する
  2. 状態3 -> 状態4になる

# データベース方式
## データの特徴で異なるデータベース
- データベース
  - 業務で扱う関連性のあるデータを統合し、組織的に管理・蓄積したもの
  - データの冗長性を極力排除し、多目的な利用(検索や更新)が効率的にできるようになっている

- 関係データベース(RDBMS)
  - データを2次元の表によって表現したデータベース
  - 非構造型
    - 構築がしやすい / 簡単に壊せる
    - 壊せないようサポートするのがDBMS

- 構造型データベース
  - 階層型データベース
    - HDB(Hierarchical DB)
    - レコード間に階層構造を持たせた木構造で表現
    - 親レコードと子レコードはポインタで結合する
  - ネットワーク型(網型)データベース
    - NDB(Network DB)
    - 階層構造かつレコード間に複数のつながりを持たせた形で表現

- オブジェクト指向データベース
  - OODB(Object Oriented DB)
  - データと手続きを一体化(カプセル化)して表現

- ハイパテキストデータベース
  - 複数の文書をそれぞれリンクさせた形で持たせたデータベース

- マルチメディアデータベース
  - テキストだけでなく、静止画や動画、音声などを管理できるデータベース

- XMLデータベース
  - タグを用いてデータの構造と意味を表す

## データベースのモデル
- 3層スキーマ
  - 概念スキーマ(スキーマ)
  - 外部スキーマ(副スキーマ)
  - 内部スキーマ(記憶スキーマ)

## RDBMS 関係モデルの構造
- 表(relation; 関係)
  - 従来のファイルに相当するもので、通常、1つのデータベース内に構成が異なる複数の表が存在する
- 列(attribute; 属性)
  - フィールド(項目)に相当し、実際のデータが格納される
  - 1つの表の列構成は全行で同じ
- 行(tuple; 組)
  - 1行がファイルにおける1レコードに対応する
- 定義域(domain; ドメイン)

## データベース管理システム
利用者との間に介在して、データベースの管理を効率よく行うソフトウェア(ミドルウェア)

- データベース定義機能
  - データベースの作成を行う
  - データの論理構造(スキーマ)を決定
  - 与えられた論理構造から物理構造を決定
  - 実際の定義は、データ定義言語(DDL; Date Definition Language)で行う

- データベース操作機能
  - データに指示を出し、データベースの操作を行う
  - データの格納場所やアクセス方式など、詳細な情報知らなくてもデータベースの操作が可能
    - 実際の操作はデータ操作言語(Date Manipulation Language)で行う

- データベース管理(制御)機能
  - 保全機能(排他制御、障害回復など)、データ機密保護機能(アクセス制御、データの暗号化など)といった機能で構成される
    - データベースは複数の利用者が同時にデータ要求を行っても、矛盾のないようにデータを保つ必要がある

## 出典：平成23年秋期　問53 データベース方式　(全11問中8問目)
データベース管理システムを利用する目的はどれか。
(エ) 複数の利用者がデータの一貫性を確保しながら情報を共有する。

> データベース管理システム(DBMS:DataBase Management System)は、その名の通りデータベースの管理を目的としたソフトウェアです。
> DBMSによって提供される機能のうち主要なものを列挙しておきます。
>>1. 複数ユーザからの同時アクセスを矛盾なく実行するトランザクション制御機能
>>2. トランザクション障害、システム障害、記憶媒体の障害からの回復機能
>>3. アクセス制御やデータの暗号化などによるセキュリティ機能
>>4. 関係データベースにおけるSQLなどのデータベース言語機能

## 出典：平成23年特別　問72 データベース方式　(全11問中9問目)
関係データベースに関する記述中のa，bに入れる字句の適切な組合せはどれか。

関係データベースにおいて，レコード(行)を一意に識別するための情報を a と言い，表と表を特定の b で関連付けることもできる。

a -> 主キー, b -> フィールド

>選択肢にある4つの字句の意味は、以下のようになっています。
> エンティティ
>データベース設計において、実体(コンピュータ，社員など数えられる対象)を表します。
>主キー
>テーブル(表)の中で、ある一つの行を一意に特定できる値を保持する属性(列)のことです。
>フィールド
>関係データベース定義される二次元の表の中で「列」に相当します。「カラム」や「属性(アトリビュート)」とも呼ばれます。
>複数の表は、属性(フィールド)である「主キー」と「外部キー」によって関連つけられます。
>レコード
>関係データベース定義される二次元の表の中で「行」に相当します。「組(タプル)」とも呼ばれます。

## 出典：平成28年春期　問26 データベース方式　(全19問中3問目)
関係モデルとその実装である関係データベースの対応に関する記述のうち，適切なものはどれか。
(ア) 関係は，表に対応付けられる。

## 出典：平成17年秋期　問59 データベース方式　(全19問中15問目)

関係データベースの説明として，適切なものはどれか。
(エ) データを2次元の表によって表現する。

> 関係データベース(RDB:Relational DataBase)は、データ構造を平坦な2次元の表によって定義するモデルで、現在最も広く利用されているデータベースモデルです。
> 関係データベースでは、表をテーブル，行をレコードまたはタプル，列をカラムまたはフィールドと呼び、複数の表の関連は、主キー同士または主キーと外部キーによって行われます。

# データベース設計
## 関連を示すE-Rモデルを使った設計
- データベース設計
  - まずE-Rモデルにより概念設計を行う
  - E-Rモデルで利用するE-R図(Entity-Relationship diagram)は、現実の世界をエンティティ(実体)と実体とのリレーションシップ(関連)、さらに実体や関連が持つアトリビュート(属性)という概念を用いて表した図解表現である

- エンティティ(Entity; 実体)
  - 人、場所、商品のような具体的なもの、技能、納品などの抽象的な概念を表す
  - エンティティには、それを識別するための識別子(主キー)が必要
- リレーションシップ(Reationship; 関連)
  - 2つのエンティティ間にある関係を表す
- アトリビュート(Attribute; 属性)
  - エンティティやリレーションシップが持つ特徴や性質などを表す


## 出典：平成23年特別　問29 データベース設計　(全43問中23問目)
UMLを用いて表した図のデータモデルの多重度の説明のうち，適切なものはどれか。
(ア)社員が1人も所属しない組織は存在しない。

このUMLのデータモデルでは、組織と社員の関係が1対1以上になっています。これは1つの組織には1人以上の社員が所属することを表しています。

## データベースの論理設計
- 論理設計
  - E-Rモデルによる概念設計をもとに、具体的なデータベースとして構築していく作業のこと

### 主キーと外部キーの設定と役割
- 主キー
  - 関係データベースでの、行を一意に特定できるキーのこと
    - 1つの場合もあれば、複数の場合もある
    - 論理設計の際に設定する
  - 下線に実線が引かれる

- 主キー制約
  - キーの値は重複してはいけない
    - 一意性制約
  - NULLを設定してはいけない
    - 非NULL制約

- 外部キー
  - ある表の列のうち、他の表の主キーと関連付けられたフィールドのこと
  - 参照される主キーを持つデータは削除できない(または警告が出る)
    - 参照整合性制約
  - 下線に点線が引かれる

- 参照整合性制約
  - ある行(レコード)を削除しようとしたとき、他の表から参照されている場合には削除できないなど、追加、更新、削除についての制約のこと

※主キーと外部キーが同じキーの場合、点線は実線によって見えなくなってしまうので注意

## 出典：平成27年秋期　問74 ビジネスシステム　(全6問中2問目)
通信機能及び他の機器の管理機能をもつ高機能型の電力メータであるスマートメータを導入する目的として，適切でないものはどれか。
(イ) 停電時に補助電源によって，一定時間電力を供給し続ける。

> スマートメータは、通信機能を備えた電力メータで、自動的に電力の使用量を電力会社へ遠隔報告することが可能となっています。
> 単に電力使用量を自動的に検針するだけでなく、家電製品と通信を行うことにより家庭内の電力の制御することも実現可能であり、利用者にとっては現在の電力使用量をリアルタイムで知ることができるメリットもあります。

> ディジタル機器の通信能力や演算能力を活用することによって電力需要を自律的に調整し、省エネとコスト削減及び信頼性と透明性の向上を目指した新しい電力網をスマートグリッドといいます。スマートグリッドの構築には、スマートメータの普及が絶対条件であり、現在、欧米諸国の間で盗電対策，または自然エネルギーによる発電量の不安定さを補う目的でスマートメータの普及が進められています。

## 基本情報技術者平成26年秋期 午前問63
スマートグリッドの説明はどれか。
(エ) 通信と情報処理技術によって，発電と電力消費を総合的に制御し，再生可能エネルギーの活用，安定的な電力供給，最適な需給調整を図るシステム

> スマートグリッドは、ディジタル機器の通信能力や演算能力を活用することによって電力需要を自律的に調整し、省エネとコスト削減及び信頼性と透明性の向上を目指した新しい電力網システムです。

## データの重なりをなくす正規化
- 正規化
  - 関係モデルでデータベースを構築する際に必要な作業
  - 一般に第三正規化まで行う

- 正規化のメリット
  - 人間が行う作業のミスを軽減させる
    - 修正時のミスを解消
    - 削除時のミスを解消
    - 登録時の不都合を解消
  - 処理速度は落ちるが、データベースの一貫性と整合性を保つことができる

- 非正規化
  - 繰り返し項目がある形
  - このままでは登録できない

- 第1正規化
  - 繰り返し項目が排除された形
  - 計算で値を出すことが出来る項目を排除する

- 第2正規化
  - 主キーの一部だけから特定できる項目(部分関数従属)を別の表にする
  - 注意しなければならない事は、分割した表と元の表には、関連付けを行うため必ず同じ項目を持たせること

- 第3正規化
  - 第2正規形のデータのうち、キー項目以外でも特定できる(推移関数従属)データ項目を分割する

このように正規化を進めていくことで、データの冗長性を省くことができる。また、分割された表は必要に応じてキー項目で結合すれば、元の情報を得ることができる

- 関数従属性
  - ある項目の値が決まれば、それに対応して他の項目の値も一意に求めることができる性質のこと
  - 部分関数従属
    - 複数の項目からキーが構成されている場合、キー項目の一部分のみに関数従属していること
  - 完全関数従属
    - 複数の項目からキーが構成されている場合、すべてのキー項目に関数従属していること

- 推移関数従属
  - 第2正規化を行った表において、キー項目以外の項目に関数従属していること
  - キーによってある項目が決まり、その項目によって別の項目が決まる、といった推移的な状態にある状態
  - 推移関数従属を解消することで第3正規形になる

## 出典：令和4年春期　問65 データベース設計　(全34問中1問目)
条件①～⑤によって，関係データベースで管理する"従業員"表と"部門"表を作成した。"従業員"表の主キーとして，最も適切なものはどれか。

〔条件〕

1. 各従業員は重複のない従業員番号を一つもつ。
2. 同姓同名の従業員がいてもよい。
3. 各部門は重複のない部門コードを一つもつ。
4. 一つの部門には複数名の従業員が所属する。
5. 1人の従業員が所属する部門は一つだけである。

(ア) 各従業員は重複のない従業員番号を一つもつ。

> 主キーは、最小のものでなくてはならない
> 主キーは、関係データベースにおいて、テーブル(表)中の各行を一意に特定できる値をもつ属性(列)または属性の組合せで、最小のものです。主キーはテーブルごとに設定されます。
>
> 〔条件〕①に「各従業員は重複のない従業員番号を一つもつ」とありますから、従業員番号だけで"従業員"表の各行を特定することできるとわかります。別の言い方をすると1つの従業員番号が1つの行に結び付くという意味です。したがって「ア」が正解です。

# データベースの操作
## データを取り出すときの操作方法
- 集合演算
  - 和
  - 差
  - 積
  - 直積

- 関係演算
  - 選択(selection)
    - 条件を指定して、表から特定の行だけを抜き出す操作
    - クエリ文 -> *
  - 射影(projection)
    - 表指定した行だけを抜き出す操作
    - クエリ文 -> 列名
  - 結合(join)
    - 複数の表を、列の値の関連で結合して、新しい表を作り出す操作

## データベースを作り、操作する言語
データベースの定義(作成)はDBMSに用意されたDDL(データ定義言語)で行う
また、データベースに対する操作はDML(データ操作言語)で行う
DMLの実行方式には、次の2つの方式がある

- 独立言語方式(問合せ方式)
- 親言語方式
